# Digikala Product Importer v2.0.0

## ุชูุถุญุงุช
ุงู ุงูุฒููู ุงูฺฉุงู ูุงุฑุฏ ฺฉุฑุฏู ูุญุตููุงุช ุงุฒ ุฏุฌโฺฉุงูุง ุจู ููฺฉุงูุฑุณ ุฑุง ุจุง ูฺฺฏโูุง ูพุดุฑูุชู ูุฑุงูู ูโฺฉูุฏ.

## ูฺฺฏโูุง ุฌุฏุฏ ูุฑฺู 2.0.0

### โจ ูุงุจูุชโูุง ุงุตู
- **ูุฑูุฏ ุชฺฉ ูุญุตููุงุช** ุจุง ูพุดโููุงุด ฺฉุงูู
- **ูุฑูุฏ ฺฏุฑูู ูุญุตููุงุช** ุงุฒ ฺฉ ุฏุณุชูโุจูุฏ
- **ููุชุฑ ุจุฑ ุงุณุงุณ ุจุฑูุฏ** ุฏุฑ ูุฑูุฏ ฺฏุฑูู
- **ููุงููฺฏโุณุงุฒ ุฎูุฏฺฉุงุฑ ููุชโูุง** ุฏู ุจุงุฑ ุฏุฑ ุฑูุฒ
- **ูพุดุชุจุงู ฺฉุงูู ุงุฒ ูุญุตููุงุช ูุชุบุฑ** (ุฑูฺฏโูุง ูุฎุชูู)
- **ุญุฐู ุชฺฉุฑุงุฑโูุง** ุจุฑุง ูุญุตููุงุช ุจุง ุฑูฺฏ ฺฉุณุงู

### ๐ง ุจูุจูุฏูุง ูู
- **SKU ูุญุตููุงุช**: ุดูุงุณู ุฏุฌโฺฉุงูุง ุจู ุนููุงู SKU
- **ุฏุณุชูโุจูุฏ ููุดููุฏ**: ุงุฌุงุฏ ุฎูุฏฺฉุงุฑ ุณูุณูู ูุฑุงุชุจ ุฏุณุชูโุจูุฏโูุง
- **ูุฏุฑุช ุจุฑูุฏูุง**: ุชุงฺฉุณูููู ุงุฎุชุตุงุต ุจุฑุง ุจุฑูุฏูุง
- **ุชฺฏโฺฏุฐุงุฑ ุฎูุฏฺฉุงุฑ**: ุงุถุงูู ฺฉุฑุฏู ุชฺฏโูุง ูุญุตูู ุงุฒ ุฏุฌโฺฉุงูุง
- **ุจูููโุณุงุฒ ุชุตุงูุฑ**: ุฏุงูููุฏ ู ุฐุฎุฑู ุชุตุงูุฑ ุจุง ฺฉูุช

## ุณุงุฎุชุงุฑ ูุงูโูุง

```
digikala-product-importer/
โโโ digikala-product-importer.php      # ูุงู ุงุตู ุงูุฒููู
โโโ includes/
โ   โโโ helper-functions.php           # ุชูุงุจุน ฺฉูฺฉ
โโโ assets/
โ   โโโ admin.css                      # ุงุณุชุงูโูุง ูุฏุฑุช
โ   โโโ admin.js                       # ุฌุงูุงุงุณฺฉุฑูพุช ูุฏุฑุช
โโโ templates/
โ   โโโ admin-page.php                 # ุตูุญู ูุฑูุฏ ุชฺฉ
โ   โโโ bulk-import-page.php           # ุตูุญู ูุฑูุฏ ฺฏุฑูู
โ   โโโ price-sync-page.php            # ุตูุญู ููุงููฺฏโุณุงุฒ ููุช
โ   โโโ product-preview.php            # ูพุดโููุงุด ูุญุตูู
โโโ languages/                         # ูุงูโูุง ุชุฑุฌูู
โโโ README.md                          # ูุณุชูุฏุงุช
```

## ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### ูพุดโูุงุฒูุง
- โ WordPress 5.0 ุง ุจุงูุงุชุฑ
- โ WooCommerce 5.0 ุง ุจุงูุงุชุฑ
- โ PHP 7.4 ุง ุจุงูุงุชุฑ
- โ ุงูุฒููู cURL ูุนุงู
- โ ูุฌูุฒ ููุดุชู ุฏุฑ ูพูุดู uploads

### ูุฑุงุญู ูุตุจ
1. ูุงูโูุง ุงูุฒููู ุฑุง ุฏุฑ ูพูุดู `/wp-content/plugins/digikala-product-importer/` ูุฑุงุฑ ุฏูุฏ
2. ุงูุฒููู ุฑุง ุงุฒ ูพูู ูุฏุฑุช ูุนุงู ฺฉูุฏ
3. ุงุฒ ููู "ูุงุฑุฏ ฺฉุฑุฏู ุงุฒ ุฏุฌโฺฉุงูุง" ุงุณุชูุงุฏู ฺฉูุฏ

## ุฑุงูููุง ุงุณุชูุงุฏู

### ูุฑูุฏ ุชฺฉ ูุญุตูู

1. **ุฏุฑุงูุช ููฺฉ ูุญุตูู**
   ```
   https://www.digikala.com/product/dkp-12345678/
   ```

2. **ูุงุฑุฏ ฺฉุฑุฏู ููฺฉ** ุฏุฑ ุตูุญู ูุฑูุฏ ุชฺฉ

3. **ุจุฑุฑุณ ูพุดโููุงุด** ู ุงูุชุฎุงุจ ุชูุธูุงุช:
   - ุงูุชุฎุงุจ ูุชุบุฑูุง (ุฑูฺฏโูุง)
   - ุชูุธู ููุชโูุง
   - ุงูุชุฎุงุจ ูุดุฎุตุงุช ูู
   - ุชูุธูุงุช ุชุตุงูุฑ

4. **ูุงุฑุฏ ฺฉุฑุฏู ูุญุตูู**

### ูุฑูุฏ ฺฏุฑูู ูุญุตููุงุช

1. **ุฏุฑุงูุช ููฺฉ ุฏุณุชูโุจูุฏ**
   ```
   # ฺฉู ุฏุณุชูโุจูุฏ
   https://www.digikala.com/search/category-mobile-phone/
   
   # ุจุฑูุฏ ุฎุงุต ุฏุฑ ุฏุณุชูโุจูุฏ
   https://www.digikala.com/search/category-mobile-phone/?brands[0]=18
   ```

2. **ุงูุชุฎุงุจ ูุญุตููุงุช** ุงุฒ ุฌุฏูู ููุงุด ุฏุงุฏู ุดุฏู

3. **ุชูุธู ูพุงุฑุงูุชุฑูุง ุนููู**:
   - ฺฏุงุฑุงูุช
   - ููุฌูุฏ ูพุดโูุฑุถ
   - ุชูุธูุงุช ุชุตุงูุฑ

4. **ุดุฑูุน ูุฑูุฏ ฺฏุฑูู** ุจุง ููุงุด ูพุดุฑูุช ูุญุธูโุง

### ููุงููฺฏโุณุงุฒ ููุชโูุง

#### ุจุฑูุฒุฑุณุงู ุฎูุฏฺฉุงุฑ
- ุงุฌุฑุง ูโุดูุฏ: **ุฏู ุจุงุฑ ุฏุฑ ุฑูุฒ**
- ูุญุตููุงุช ูุฏู: **ุชูุงู ูุญุตููุงุช ุจุง SKU ุนุฏุฏ**
- ูพุดุชุจุงู: **ูุญุตููุงุช ูุชุบุฑ**

#### ุจุฑูุฒุฑุณุงู ุฏุณุช
1. ูุฑุงุฌุนู ุจู ุตูุญู "ููุงููฺฏโุณุงุฒ ููุช"
2. ฺฉูฺฉ ุจุฑ ุฑู "ุดุฑูุน ุจุฑูุฒุฑุณุงู ุฏุณุช"
3. ูุดุงูุฏู ฺฏุฒุงุฑุด ูพุดุฑูุช

## ููพูฺฏ ุฏุงุฏูโูุง

### ุงุฒ ุฏุฌโฺฉุงูุง ุจู ููฺฉุงูุฑุณ

| ููุฏ ุฏุฌโฺฉุงูุง | ููุฏ ููฺฉุงูุฑุณ | ุชูุถุญุงุช |
|----------------|----------------|----------|
| `id` | `_sku` | ุดูุงุณู ูุญุตูู |
| `title_fa` | `post_title` | ูุงู ูุญุตูู |
| `title_en` | `en_pro_name` | ูุงู ุงูฺฏูุณ |
| `brand.title` | `product_brand` | ุจุฑูุฏ ูุญุตูู |
| `tags[].title` | `product_tag` | ุชฺฏโูุง ูุญุตูู |
| `data_layer.item_category*` | `product_cat` | ุฏุณุชูโุจูุฏโูุง |
| `images.main.url` | Featured Image | ุชุตูุฑ ุดุงุฎุต |
| `images.list` | Gallery | ฺฏุงูุฑ ุชุตุงูุฑ |
| `specifications` | `_product_attributes` | ูุดุฎุตุงุช ูู |
| `variants` | Variable Products | ูุญุตููุงุช ูุชุบุฑ |

### ููุฏูุง ุณูุงุฑุด ุงุถุงูู ุดุฏู

```php
// ููุฏูุง ูพุดโูุฑุถ ุงุถุงูู ุดุฏู
'product_granti_text'    => 'ูุชู ฺฏุงุฑุงูุช'
'product_hamta_text'     => 'ูุดุฏุงุฑ ููุชุง'  
'product_Original_text'  => 'ุถูุงูุช ุงุตุงูุช'
'product_return_text'    => 'ุดุฑุงุท ุจุงุฒฺฏุดุช'
'en_pro_name'           => 'ูุงู ุงูฺฏูุณ'
'_mojoodi'              => 'ููุฌูุฏ'
```

## API ูุง ุงุณุชูุงุฏู ุดุฏู

### ุฏุฑุงูุช ุงุทูุงุนุงุช ูุญุตูู
```
GET https://api.digikala.com/v2/product/{product_id}/
```

### ุฏุฑุงูุช ูุญุตููุงุช ุฏุณุชูโุจูุฏ
```
GET https://api.digikala.com/v1/categories/{category}/search/
```

### ูพุงุฑุงูุชุฑูุง ุงุฎุชุงุฑ
```
?page=1&rows=20&sort=latest&has_selling_stock=1&brand[]=18
```

## ฺฉุฑูู ุฌุงุจโูุง

### ููุงููฺฏโุณุงุฒ ููุช
- **Hook**: `dpi_daily_price_sync`
- **ูุฑฺฉุงูุณ**: `twicedaily` (ุฏู ุจุงุฑ ุฏุฑ ุฑูุฒ)
- **ุนููฺฉุฑุฏ**: ุจุฑูุฒุฑุณุงู ููุช ูุญุตููุงุช

### ูพุงฺฉุณุงุฒ ูุงูโูุง ูููุช
- **Hook**: `dpi_cleanup_temp_files`
- **ูุฑฺฉุงูุณ**: `daily` (ุฑูุฒุงูู)
- **ุนููฺฉุฑุฏ**: ุญุฐู ูุงูโูุง ูููุช ูุฏู

## ูุฏุฑุช ุฎุทุงูุง

### ุฎุทุงูุง ูุชุฏุงูู

1. **ูุญุตูู ุงูุช ูุดุฏ**
   - ุนูุช: ID ูุงูุนุชุจุฑ ุง ูุญุตูู ุญุฐู ุดุฏู
   - ุฑุงูโุญู: ุจุฑุฑุณ ุตุญุช ููฺฉ

2. **ุฎุทุง ุดุจฺฉู**
   - ุนูุช: ุนุฏู ุงุชุตุงู ุจู API ุฏุฌโฺฉุงูุง
   - ุฑุงูโุญู: ุจุฑุฑุณ ุงุชุตุงู ุงูุชุฑูุช

3. **ุฎุทุง ูุฌูุฒ**
   - ุนูุช: ุนุฏู ุฏุณุชุฑุณ ฺฉุงุฑุจุฑ
   - ุฑุงูโุญู: ุงุทููุงู ุงุฒ ููุด ฺฉุงุฑุจุฑ ููุงุณุจ

### ูุงฺฏโฺฏุฑ
- **ูุญู ุฐุฎุฑู**: ุฌุฏูู `wp_options` ุจุง ฺฉูุฏ `dpi_activity_logs`
- **ุญุฏุงฺฉุซุฑ ุฑฺฉูุฑุฏ**: 100 ุนุฏุฏ
- **ุงุทูุงุนุงุช ุซุจุช ุดุฏู**: ููุน ุนููุงุชุ ูพุงูุ ุฒูุงูุ ฺฉุงุฑุจุฑ

## ุชูุธูุงุช ูพุดุฑูุชู

### ฺฉุด (Cache)
- **ูุฏุช ุฒูุงู**: 6 ุณุงุนุช
- **ฺฉูุฏ ฺฉุด**: `dpi_product_{product_id}`
- **ูุญู ุฐุฎุฑู**: WordPress Transients

### ุจูููโุณุงุฒ
- **ุชุฃุฎุฑ ุจู ุฏุฑุฎูุงุณุชโูุง**: 2 ุซุงูู ุฏุฑ ูุฑูุฏ ฺฏุฑูู
- **ุชุฃุฎุฑ ููุงููฺฏโุณุงุฒ**: 1 ุซุงูู ุจู ูุญุตููุงุช
- **ุญุฏุงฺฉุซุฑ ุชุตุงูุฑ ฺฏุงูุฑ**: 20 ุนุฏุฏ

### ุงููุช
- **Nonce verification** ุจุฑุง ุชูุงู ุฏุฑุฎูุงุณุชโูุง AJAX
- **Capability check** ุจุฑุง ุฏุณุชุฑุณ ฺฉุงุฑุจุฑุงู
- **Input sanitization** ุจุฑุง ุชูุงู ูุฑูุฏโูุง

## ุนุจโุงุจ

### ุญุงูุช ุฏุจุงฺฏ
```php
// ุงูุฒูุฏู ุจู wp-config.php
define('DPI_DEBUG', true);
```

### ุจุฑุฑุณ ุณุณุชู
```php
// ุงุณุชูุงุฏู ุงุฒ ุชุงุจุน helper
$requirements = dpi_check_system_requirements();
if (!empty($requirements)) {
    // ููุงุด ูุงุฒููุฏโูุง ูุงูุต
}
```

### ูพุงฺฉุณุงุฒ ุฏุณุช
```php
// ูพุงฺฉ ฺฉุฑุฏู ฺฉุดโูุง
wp_cache_flush();

// ูพุงฺฉ ฺฉุฑุฏู ูุงฺฏโูุง
dpi_clear_activity_logs();

// ูพุงฺฉ ฺฉุฑุฏู ูุงูโูุง ูููุช
dpi_cleanup_temp_files();
```

## ูุฌูุฒูุง ู ฺฉูพโุฑุงุช

ุงู ุงูุฒููู ุชุญุช ูุฌูุฒ GPL v2 ุง ุจุงูุงุชุฑ ููุชุดุฑ ุดุฏู ุงุณุช.

**ุชูุณุนูโุฏููุฏู**: ูุซู ููุจูุงุฑ  
**ูุฑฺู**: 2.0.0  
**ุขุฎุฑู ุจุฑูุฒุฑุณุงู**: 2025  

## ูพุดุชุจุงู

ุจุฑุง ฺฏุฒุงุฑุด ุจุงฺฏโูุง ุง ุฏุฑุฎูุงุณุช ูฺฺฏโูุง ุฌุฏุฏุ ูุทูุงู ุจุง ุชูุณุนูโุฏููุฏู ุชูุงุณ ุจฺฏุฑุฏ.

---

**ูฺฉุชู**: ุงู ุงูุฒููู ุชููุง ุจุฑุง ุงุณุชูุงุฏู ูุงููู ู ุฏุฑ ฺุงุฑฺูุจ ููุงูู ฺฉูพโุฑุงุช ุทุฑุงุญ ุดุฏู ุงุณุช. ฺฉุงุฑุจุฑุงู ูุณุฆูู ุฑุนุงุช ููุงูู ูุฑุจูุทู ูุณุชูุฏ.